# روبوت تداول العملات المشفرة

## نظرة عامة

هذا المشروع هو روبوت تداول آلي للعملات المشفرة مصمم للتداول على منصتي Binance و MEXC. يستخدم الروبوت مجموعة من المؤشرات الفنية (RSI, MACD, EMA) لاتخاذ قرارات الشراء والبيع، ويوفر واجهة مستخدم ويب (مبنية باستخدام Next.js و Tailwind CSS) لمراقبة الأداء وإدارة الإعدادات.

## الميزات الرئيسية

*   **التداول الآلي:** ينفذ صفقات الشراء والبيع تلقائيًا بناءً على استراتيجية محددة مسبقًا.
*   **دعم منصات متعددة:** يعمل حاليًا مع Binance و MEXC.
*   **واجهة مستخدم ويب:** لوحة تحكم تفاعلية لعرض:
    *   أرصدة الحسابات.
    *   الطلبات المفتوحة والمغلقة.
    *   ملخص الربح/الخسارة اليومي.
    *   سجل التداول (مع إمكانية الفلترة).
    *   إعدادات قابلة للتعديل (المخاطرة لكل صفقة، وقف الخسارة، جني الأرباح، إلخ).
    *   زر لإيقاف/استئناف الروبوت.
*   **إدارة المخاطر:** حساب حجم الصفقة بناءً على نسبة المخاطرة المحددة ورصيد الحساب.
*   **إشعارات Telegram:** إرسال تنبيهات فورية عند تنفيذ الصفقات.
*   **تسجيل النشاط:** حفظ سجلات جميع أنشطة التداول في ملف CSV.
*   **إدخال آمن لمفاتيح API:** واجهة لإدخال مفاتيح Binance و MEXC وتخزينها (مبدئيًا في ملف `.env` بالخلفية).

## البنية

يتكون المشروع من جزأين رئيسيين:

1.  **الخلفية (`backend`):** تطبيق Node.js/Express مسؤول عن:
    *   الاتصال بمنصات التداول (Binance, MEXC) باستخدام مكتبة `ccxt`.
    *   جلب بيانات السوق وتحليلها باستخدام المؤشرات الفنية (`technicalindicators`).
    *   تنفيذ منطق استراتيجية التداول.
    *   إدارة الطلبات.
    *   إرسال الإشعارات (Telegram).
    *   تسجيل الأنشطة.
    *   توفير واجهة برمجة تطبيقات (API) للواجهة الأمامية.
2.  **الواجهة الأمامية (`frontend`):** تطبيق Next.js/React مسؤول عن:
    *   عرض لوحة التحكم التفاعلية.
    *   التواصل مع واجهة برمجة التطبيقات الخلفية لجلب البيانات وعرضها.
    *   السماح للمستخدم بإدارة الإعدادات وإدخال مفاتيح API.

## الإعداد والتشغيل

### المتطلبات المسبقة

*   Node.js (الإصدار 18 أو أحدث مستحسن)
*   npm (عادة ما يأتي مع Node.js)
*   حسابات على Binance و/أو MEXC مع إنشاء مفاتيح API.
*   حساب Telegram وإنشاء بوت للحصول على Token و Chat ID (للتنبيهات).

### الخطوات

1.  **استنساخ المستودع:**
    ```bash
    git clone https://github.com/mjeed279/trading-bot-project.git
    cd trading-bot-project
    ```

2.  **تثبيت الاعتماديات:**
    *   للخلفية:
        ```bash
        cd backend
        npm install
        ```
    *   للواجهة الأمامية:
        ```bash
        cd ../frontend
        npm install
        ```

3.  **إعداد متغيرات البيئة (الخلفية):**
    *   انتقل إلى مجلد `backend`.
    *   قم بإنشاء ملف باسم `.env`.
    *   أضف المتغيرات التالية إلى الملف مع استبدال القيم بقيمك الخاصة:
        ```dotenv
        PORT=5000 # أو أي منفذ تفضله للخلفية

        # مفاتيح Binance
        BINANCE_API_KEY=مفتاح_API_الخاص_بك_هنا
        BINANCE_API_SECRET=سر_API_الخاص_بك_هنا

        # مفاتيح MEXC
        MEXC_API_KEY=مفتاح_API_الخاص_بك_هنا
        MEXC_API_SECRET=سر_API_الخاص_بك_هنا

        # بيانات Telegram
        TELEGRAM_BOT_TOKEN=التوكن_الخاص_ببوت_التلغرام_هنا
        TELEGRAM_CHAT_ID=معرف_الدردشة_الخاص_بك_هنا
        ```

4.  **تشغيل الخوادم:**
    *   لتشغيل خادم الخلفية (من مجلد `backend`):
        ```bash
        node src/server.js
        # أو استخدم nodemon للتطوير: npm install -g nodemon && nodemon src/server.js
        ```
    *   لتشغيل خادم الواجهة الأمامية (من مجلد `frontend`):
        ```bash
        npm run dev
        ```

5.  **الوصول إلى لوحة التحكم:**
    *   افتح متصفح الويب وانتقل إلى `http://localhost:3000` (أو المنفذ الذي تم تشغيل الواجهة الأمامية عليه).

## الاستخدام

*   **لوحة التحكم:** تعرض ملخصًا لأداء الروبوت، الأرصدة، الطلبات، وسجل التداول.
*   **إدخال مفاتيح API:** استخدم زر "إدارة مفاتيح API" لإدخال أو تحديث مفاتيح Binance و MEXC. سيتم إرسالها إلى الخلفية (ملاحظة: آلية التخزين الآمن في الخلفية لا تزال قيد التطوير).
*   **الإعدادات:** استخدم علامة التبويب "الإعدادات" لضبط معلمات التداول مثل نسبة المخاطرة، وقف الخسارة، جني الأرباح، والحد الأقصى للصفقات المفتوحة.
*   **إيقاف/استئناف:** استخدم زر التبديل في قسم "حالة الروبوت" لإيقاف الروبوت مؤقتًا أو استئناف عمله.

## النشر

المشروع مهيأ للنشر على Vercel. الواجهة الأمامية (`frontend`) يتم نشرها تلقائيًا عند دفع التغييرات إلى الفرع `master` في مستودع GitHub. الخلفية (`backend`) تحتاج إلى نشر منفصل (على سبيل المثال، باستخدام خدمة مثل Render, Heroku, أو خادم VPS).

## تسجيل البيانات

يتم تسجيل جميع أنشطة التداول الهامة (شراء، بيع، أخطاء، أحداث) في ملف `backend/logs/activity_log.csv`.

## ملاحظات وتطوير مستقبلي

*   تحسين آلية التخزين الآمن لمفاتيح API في الخلفية.
*   إكمال تنفيذ جميع الميزات المطلوبة في الواجهة الأمامية (عرض الأرصدة، الطلبات، السجل، إلخ).
*   تطوير وحدة اختبار رجعي (Backtesting) لاختبار الاستراتيجية على بيانات تاريخية.
*   إضافة المزيد من المؤشرات الفنية وخيارات الاستراتيجيات.
*   تحسين معالجة الأخطاء وآليات إعادة المحاولة.
*   إضافة دعم لمنصات تداول أخرى.
*   تحسين واجهة برمجة التطبيقات الخلفية لتوفير بيانات أكثر تفصيلاً للواجهة الأمامية.

